<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fashion Store - Free E-commerce</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        :root { --primary: #ff4a6e; --secondary: #4a90e2; --dark: #333; --light: #f8f9fa; --success: #28a745; }
        body { background: #f5f5f5; color: #333; }
        
        .header { background: linear-gradient(135deg, var(--primary), #ff6b95); color: white; padding: 1rem 2rem; position: fixed; width: 100%; top: 0; z-index: 1000; }
        .nav { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
        .logo { font-size: 1.8rem; font-weight: bold; }
        .nav-links { display: flex; gap: 2rem; align-items: center; }
        .nav-links a { color: white; text-decoration: none; font-weight: 500; }
        .wallet-balance { background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 20px; }
        
        .container { max-width: 1200px; margin: 80px auto 2rem; padding: 0 1rem; }
        .hero { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 4rem 2rem; text-align: center; border-radius: 15px; margin-bottom: 3rem; }
        .hero h1 { font-size: 3rem; margin-bottom: 1rem; }
        
        .products-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin: 2rem 0; }
        .product-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .product-card:hover { transform: translateY(-5px); }
        .product-image { width: 100%; height: 200px; background: linear-gradient(45deg, #ff9a9e, #fad0c4); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; }
        .product-info { padding: 1.5rem; }
        .product-title { font-size: 1.2rem; font-weight: bold; margin-bottom: 0.5rem; }
        .current-price { font-size: 1.3rem; font-weight: bold; color: var(--primary); }
        .original-price { text-decoration: line-through; color: #999; }
        .discount { background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 12px; font-size: 0.8rem; }
        
        .btn { padding: 0.7rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .btn-primary { background: var(--primary); color: white; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 2rem; border-radius: 12px; width: 90%; max-width: 400px; }
        
        .cart-sidebar { position: fixed; top: 0; right: -400px; width: 400px; height: 100vh; background: white; transition: right 0.3s; z-index: 1500; padding: 2rem; }
        .cart-sidebar.active { right: 0; }
        
        .admin-section { background: white; padding: 2rem; border-radius: 12px; margin: 2rem 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="logo">üõçÔ∏è FashionStore</div>
            <div class="nav-links">
                <a href="#" onclick="showSection('home')">Home</a>
                <a href="#" onclick="showSection('products')">Products</a>
                <a href="#" onclick="showSection('wallet')">Wallet</a>
                <a href="#" onclick="showAdmin()">Admin</a>
                <div class="wallet-balance" id="walletBalance">$0.00</div>
                <a href="#" onclick="toggleCart()">üõí Cart (<span id="cartCount">0</span>)</a>
                <a href="#" onclick="logout()" id="logoutBtn" style="display: none;">Logout</a>
                <a href="#" onclick="showLogin()" id="loginBtn">Login</a>
            </div>
        </nav>
    </header>

    <div class="container">
        <section id="homeSection">
            <div class="hero">
                <h1>Welcome to FashionStore</h1>
                <p>Discover the latest trends with amazing discounts</p>
                <button class="btn btn-primary" onclick="showSection('products')" style="margin-top: 2rem;">Start Shopping</button>
            </div>
            <div class="admin-section">
                <h2>Featured Products</h2>
                <div class="products-grid" id="featuredProducts"></div>
            </div>
        </section>

        <section id="productsSection" style="display: none;">
            <div class="admin-section">
                <h2>All Products</h2>
                <div class="products-grid" id="allProducts"></div>
            </div>
        </section>

        <section id="walletSection" style="display: none;">
            <div class="admin-section">
                <h2>My Wallet</h2>
                <div class="wallet-balance" style="font-size: 2rem; text-align: center; padding: 2rem;">$<span id="currentBalance">0.00</span></div>
                <h3>Transaction History</h3>
                <div id="transactionHistory"></div>
            </div>
        </section>

        <section id="adminSection" style="display: none;">
            <div class="admin-section">
                <h2>Admin Panel</h2>
                <select id="userSelect"><option value="">Select user</option></select>
                <input type="number" id="topupAmount" placeholder="Amount" style="width: 100%; padding: 0.8rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 8px;">
                <button class="btn btn-primary" onclick="processTopup()" style="width: 100%;">Process Top-up</button>
            </div>
            <div class="admin-section">
                <h2>All Users</h2>
                <div id="usersList"></div>
            </div>
        </section>
    </div>

    <div class="cart-sidebar" id="cartSidebar">
        <h2>Shopping Cart</h2>
        <div id="cartItems"></div>
        <div style="margin-top: 2rem; padding-top: 1rem; border-top: 2px solid #eee; font-size: 1.3rem; font-weight: bold; text-align: center;">
            Total: $<span id="cartTotal">0.00</span>
        </div>
        <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="checkout()">Checkout</button>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h2>Login</h2>
            <input type="email" id="loginEmail" placeholder="Email" style="width: 100%; padding: 0.8rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 8px;">
            <input type="password" id="loginPassword" placeholder="Password" style="width: 100%; padding: 0.8rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 8px;">
            <button class="btn btn-primary" onclick="login()" style="width: 100%;">Login</button>
            <div style="margin-top: 1rem; text-align: center;">
                <p><strong>Admin:</strong> admin@example.com / admin123</p>
                <p><strong>User:</strong> john@example.com / user123</p>
            </div>
        </div>
    </div>

    <script>
        const sampleProducts = [
            {id: 1, name: "Floral Summer Dress", price: 29.99, originalPrice: 49.99, discount: 40, category: "Dresses", image: "üëó"},
            {id: 2, name: "Designer Jeans", price: 39.99, originalPrice: 59.99, discount: 33, category: "Jeans", image: "üëñ"},
            {id: 3, name: "Cotton T-Shirt", price: 12.99, originalPrice: 19.99, discount: 35, category: "Tops", image: "üëï"},
            {id: 4, name: "Winter Jacket", price: 79.99, originalPrice: 129.99, discount: 38, category: "Outerwear", image: "üß•"},
            {id: 5, name: "Sports Shoes", price: 49.99, originalPrice: 79.99, discount: 37, category: "Shoes", image: "üëü"},
            {id: 6, name: "Evening Gown", price: 89.99, originalPrice: 149.99, discount: 40, category: "Dresses", image: "üíÉ"}
        ];

        const sampleUsers = [
            {id: 1, name: "Admin User", email: "admin@example.com", password: "admin123", role: "admin", wallet: 1000.00, transactions: []},
            {id: 2, name: "John Doe", email: "john@example.com", password: "user123", role: "user", wallet: 250.50, transactions: []}
        ];

        function initializeData() {
            if (!localStorage.getItem('products')) localStorage.setItem('products', JSON.stringify(sampleProducts));
            if (!localStorage.getItem('users')) localStorage.setItem('users', JSON.stringify(sampleUsers));
            if (!localStorage.getItem('currentUser')) localStorage.setItem('currentUser', '');
            if (!localStorage.getItem('cart')) localStorage.setItem('cart', JSON.stringify([]));
        }

        function getProducts() { return JSON.parse(localStorage.getItem('products')) || []; }
        function getUsers() { return JSON.parse(localStorage.getItem('users')) || []; }
        function getCurrentUser() { const email = localStorage.getItem('currentUser'); return email ? getUsers().find(user => user.email === email) : null; }
        function getCart() { return JSON.parse(localStorage.getItem('cart')) || []; }

        function showLogin() { document.getElementById('loginModal').style.display = 'flex'; }
        function closeModals() { document.getElementById('loginModal').style.display = 'none'; }

        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const users = getUsers();
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                localStorage.setItem('currentUser', user.email);
                updateUI();
                closeModals();
                showSection('home');
                alert('Login successful!');
            } else {
                alert('Use: admin@example.com/admin123 or john@example.com/user123');
            }
        }

        function logout() { localStorage.setItem('currentUser', ''); updateUI(); showSection('home'); }

        function updateUI() {
            const user = getCurrentUser();
            const cart = getCart();
            if (user) {
                document.getElementById('walletBalance').textContent = `$${user.wallet.toFixed(2)}`;
                document.getElementById('currentBalance').textContent = user.wallet.toFixed(2);
                document.getElementById('logoutBtn').style.display = 'block';
                document.getElementById('loginBtn').style.display = 'none';
            } else {
                document.getElementById('walletBalance').textContent = '$0.00';
                document.getElementById('logoutBtn').style.display = 'none';
                document.getElementById('loginBtn').style.display = 'block';
            }
            document.getElementById('cartCount').textContent = cart.length;
            loadProducts();
        }

        function showSection(section) {
            document.querySelectorAll('.container > section').forEach(s => s.style.display = 'none');
            document.getElementById(section + 'Section').style.display = 'block';
            if (section === 'products') loadAllProducts();
            if (section === 'wallet') loadWallet();
        }

        function showAdmin() {
            const user = getCurrentUser();
            if (user && user.role === 'admin') showSection('admin');
            else { alert('Admin access required!'); showLogin(); }
        }

        function loadProducts() {
            const products = getProducts();
            document.getElementById('featuredProducts').innerHTML = products.slice(0, 3).map(product => `
                <div class="product-card">
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div style="display: flex; gap: 1rem; align-items: center; margin: 0.5rem 0;">
                            <span class="current-price">$${product.price.toFixed(2)}</span>
                            <span class="original-price">$${product.originalPrice.toFixed(2)}</span>
                            <span class="discount">-${product.discount}%</span>
                        </div>
                        <button class="btn btn-primary" onclick="addToCart(${product.id})">Add to Cart</button>
                    </div>
                </div>
            `).join('');
        }

        function loadAllProducts() {
            const products = getProducts();
            document.getElementById('allProducts').innerHTML = products.map(product => `
                <div class="product-card">
                    <div class="product-image">${product.image}</div>
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div style="display: flex; gap: 1rem; align-items: center; margin: 0.5rem 0;">
                            <span class="current-price">$${product.price.toFixed(2)}</span>
                            <span class="original-price">$${product.originalPrice.toFixed(2)}</span>
                            <span class="discount">-${product.discount}%</span>
                        </div>
                        <button class="btn btn-primary" onclick="addToCart(${product.id})">Add to Cart</button>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            const user = getCurrentUser();
            if (!user) { showLogin(); return; }
            const products = getProducts();
            const product = products.find(p => p.id === productId);
            const cart = getCart();
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) existingItem.quantity += 1;
            else cart.push({...product, quantity: 1});
            localStorage.setItem('cart', JSON.stringify(cart));
            updateUI();
            alert('Added to cart!');
        }

        function toggleCart() {
            const user = getCurrentUser();
            if (!user) { showLogin(); return; }
            document.getElementById('cartSidebar').classList.toggle('active');
            loadCart();
        }

        function loadCart() {
            const cart = getCart();
            let total = 0;
            document.getElementById('cartItems').innerHTML = cart.map(item => {
                total += item.price * item.quantity;
                return `<div style="display: flex; justify-content: space-between; padding: 1rem 0; border-bottom: 1px solid #eee;">
                    <div>${item.image} ${item.name} x${item.quantity}</div>
                    <div>$${(item.price * item.quantity).toFixed(2)}</div>
                </div>`;
            }).join('');
            document.getElementById('cartTotal').textContent = total.toFixed(2);
        }

        function checkout() {
            const user = getCurrentUser();
            const cart = getCart();
            if (cart.length === 0) { alert('Cart empty!'); return; }
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            if (user.wallet < total) { alert('Insufficient funds!'); return; }
            const users = getUsers();
            const userIndex = users.findIndex(u => u.email === user.email);
            users[userIndex].wallet -= total;
            users[userIndex].transactions.push({type: 'purchase', amount: total, description: `Purchase`, date: new Date()});
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('cart', JSON.stringify([]));
            updateUI();
            loadCart();
            toggleCart();
            alert(`Purchased! $${total.toFixed(2)} deducted.`);
        }

        function loadWallet() {
            const user = getCurrentUser();
            if (!user) return;
            document.getElementById('transactionHistory').innerHTML = user.transactions.map(t => `
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: #f8f9fa; margin: 0.5rem 0; border-radius: 8px;">
                    <div><strong>${t.description}</strong><br><small>${new Date(t.date).toLocaleDateString()}</small></div>
                    <div style="color: ${t.type === 'deposit' ? '#28a745' : '#ff4a6e'}; font-weight: bold;">
                        ${t.type === 'deposit' ? '+' : '-'}$${t.amount.toFixed(2)}
                    </div>
                </div>
            `).join('');
        }

        function processTopup() {
            const userEmail = document.getElementById('userSelect').value;
            const amount = parseFloat(document.getElementById('topupAmount').value);
            if (!userEmail || !amount) { alert('Select user and amount!'); return; }
            const users = getUsers();
            const userIndex = users.findIndex(u => u.email === userEmail);
            users[userIndex].wallet += amount;
            users[userIndex].transactions.push({type: 'deposit', amount: amount, description: 'Admin top-up', date: new Date()});
            localStorage.setItem('users', JSON.stringify(users));
            document.getElementById('topupAmount').value = '';
            updateUI();
            alert(`Added $${amount.toFixed(2)}!`);
        }

        initializeData();
        updateUI();
        loadProducts();
    </script>
</body>
</html>
